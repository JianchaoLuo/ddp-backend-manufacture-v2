  
  # åŒ¹é…developåˆ†æ”¯
  develop:
    # è§¦å‘äº‹ä»¶ä¸ºpushäº‹ä»¶
    push:
      - docker:
          # å£°æ˜æ„å»ºç¯å¢ƒï¼Œå¯ä»¥åœ¨ dockerhub ä¸Š https://hub.docker.com/_/maven æ‰¾åˆ°æ‚¨éœ€è¦mavenå’Œjdkç‰ˆæœ¬
          # image: maven:3.8.6-openjdk-8
          image: maven:4.0.0-rc-4-amazoncorretto-21

          volumes:
            # å£°æ˜å¼çš„æ„å»ºç¼“å­˜ https://docs.cnb.cool/grammar/pipeline.html#volumes
            - /root/.m2:copy-on-write
        services:
          # æµæ°´çº¿ä¸­å¯ç”¨ docker æœåŠ¡
          - docker
        stages:
          - name: mvn package
            script: |
              # æŒ‡å®šmavené•œåƒæº
              mvn clean package -s ./settings.xml -DskipTests
              mvn deploy -s ./settings.xml -DskipTests
          # äº‘åŸç”Ÿæ„å»ºè‡ªåŠ¨æ„å»ºDockeré•œåƒå¹¶å°†å®ƒå‘å¸ƒåˆ°åˆ¶å“åº“ï¼Œã€ä¸Šä¼ Dockeråˆ¶å“ã€‘https://docs.cnb.cool/artifact/docker.html
          - name: docker build
            script:
              - docker build -t ${CNB_DOCKER_REGISTRY}/${CNB_REPO_SLUG_LOWERCASE}:${CNB_COMMIT} .
              - docker build -t ${CNB_DOCKER_REGISTRY}/${CNB_REPO_SLUG_LOWERCASE}:latest .
          - name: docker push
            script:
              - docker push ${CNB_DOCKER_REGISTRY}/${CNB_REPO_SLUG_LOWERCASE}:${CNB_COMMIT}
              - docker push ${CNB_DOCKER_REGISTRY}/${CNB_REPO_SLUG_LOWERCASE}:latest
  
    # push:
    # - services:
    #     - docker
    #   stages:
    #     - name: maven build
    #       script: |
    #         echo "ğŸ“¦ å¼€å§‹ Maven æ„å»º..."
    #         mvn clean package -DskipTests
    #         echo "âœ… æ„å»ºå®Œæˆ"
    #     # åŒåé•œåƒæ„å»º&æ¨é€
    #     - name: docker build
    #       script: docker build -t ${CNB_DOCKER_REGISTRY}/${CNB_REPO_SLUG_LOWERCASE}:latest .
    #     - name: docker push
    #       script: docker push ${CNB_DOCKER_REGISTRY}/${CNB_REPO_SLUG_LOWERCASE}:latest

  # æ›´å¤šèµ„æ–™è§ https://docs.cnb.cool/build/quick-start.html